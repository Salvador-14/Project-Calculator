<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Calculator Project</title>
  </head>
  <body>
    <div class="main">
      <div class="display">
        <input type="text" id="display" disabled>
      </div>
      <div class="cleaning">
        <button id="clear">CLEAR</button>
        <button id="delete">DELETE</button>
      </div>
      <div class="buttons">
        <button class="number">7</button>
        <button class="number">8</button>
        <button class="number">9</button>
        <button class="operator">/</button>
        <button class="number">4</button>
        <button class="number">5</button>
        <button class="number">6</button>
        <button class="operator">x</button>
        <button class="number">1</button>
        <button class="number">2</button>
        <button class="number">3</button>
        <button class="operator">-</button>
        <button class="number">0</button>
        <button class="number">.</button>
        <button class="equal">=</button>
        <button class="operator">+</button>
      </div>

    </div>

    <script>
      const display = document.querySelector('#display');
      const numbers = document.querySelectorAll('.number');
      const operators = document.querySelectorAll('.operator');
      const cleaning = document.querySelectorAll('.cleaning button');
      const equal = document.querySelector('.equal');

      let operation = [];
      let noExtraSigns = '';
      let total = '';

      numbers.forEach(number => number.addEventListener('click', () => {
        if (number.textContent === '.' && noExtraSigns.match(/\./)) return;
        display.value += number.textContent;

        noExtraSigns += number.textContent;
      }));
      

      operators.forEach(operator => operator.addEventListener('click', () => {
        if (noExtraSigns.match(/\/|\x|\-|\+/) || !noExtraSigns) return;

        display.value += operator.textContent;
        noExtraSigns = '';
      }));

      cleaning.forEach(btn => btn.addEventListener('click', () => {
        if (btn.id === 'clear') clearData();
        if (btn.id === 'delete')  {
          display.value = display.value.slice(0, -1);
        };
      }));

      equal.addEventListener('click', () => {
        let operationElements = '';

        for (const item of display.value) {
          if (item === '/' || item === 'x' || item === '-' || item === '+') {
            operation.push(operationElements);
            operation.push(item);
            operationElements = '';
          } else operationElements += item;
        }
        
        if (operationElements) operation.push(operationElements);
        operationElements = '';
        
        spliceArray(operation);
        if (display.value !== 'bruh') display.value = total;
      });

      window.addEventListener('keydown', (e) => {
       /*  if (e.key == []) return;
        display.value += e.key; */
      });

    </script>
    <script src="main.js"></script>
  </body>
</html>